<!DOCTYPE html>
<html class="w-full h-full">

<head>
  <title>Kalosm</title>
  <link rel="icon" href="/assets/Icon.png" type="image/png" />
  <meta name="description" content="Floneum is a graph editor for local LLM workflows." />
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="/output.css" />
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown-light.min.css" />
  <style>
    .markdown-body ul {
      list-style: disc;
    }

    .markdown-body ol {
      list-style: decimal;
    }

    .markdown-body li {
      display: list-item;
    }

    .markdown-body button {
      display: inline-block;
      background-color: rgba(209, 213, 219, 0.3);
      border-radius: 0.25rem;
      padding: 0.25rem 0.5rem;
      border: 1px solid;
      margin: 0.25rem;
    }

    .markdown-body .header {
      color: inherit
    }

    .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 5%;
      /* padding: 45px; */
      list-style: disc;
    }

    .main::-webkit-scrollbar {
      display: none;
    }

    /* Hide scrollbar for IE, Edge and Firefox */
    .main {
      -ms-overflow-style: none;
      /* IE and Edge */
      scrollbar-width: none;
      /* Firefox */
    }
  </style>
  <script src="https://buttons.github.io/buttons.js"></script>
</head>

<body style="overflow-x:hidden;--scroll:0;" class="w-full h-full">
  <div id="main" class="w-full h-full"><pre data-node-hydration=0></pre><div class="h-14 z-30 fixed top-0 flex flex-row justify-between items-center bg-gray-100 opacity-50 border-b-2 border-gray-700 w-screen backdrop-blur-lg" data-node-hydration="1"><a href="/" dioxus-prevent-default="onclick" class="text-xl font-bold m-2 md:mr-12" data-node-hydration="2,click:1">Floneum</a><label for="search" class="sr-only" data-node-hydration="3">Search</label><div class="relative" data-node-hydration="4"><div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="h-5 w-5 text-gray-400"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z"></path></svg></div><button name="search" class="block w-full rounded-md border-0 bg-white py-1.5 pl-10 pr-3 text-gray-400 ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6" id="search" data-node-hydration="5,click:1"><div class="h-full my-auto flex flex-row align-middle justify-between"><span class="md:pl-2">Search</span><div class="ml-3 flex-none font-semibold text-gray-500"><kbd class="font-sans">CTRL + /</kbd></div></div></button></div><div class="flex flex-row justify-evenly items-center text-center"><a href="/blog/" dioxus-prevent-default="onclick" class="text-sm md:text-xl font-bold pr-1 md:p-2" data-node-hydration="6,click:1">Blog</a><a href="/docs/" dioxus-prevent-default="onclick" class="text-sm md:text-xl font-bold md:p-2" data-node-hydration="7,click:1">Documentation</a><a href="https://github.com/floneum/floneum" data-node-hydration="8"><span class="sr-only">Github</span><svg class="md:m-2 w-5 md:w-8 h-5 md:h-8" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" fill="currentColor" fill-rule="nonzero"></path></svg></a><a href="https://discord.gg/dQdmhuB8q5" style="margin:10px;right:10px;" data-node-hydration="9"><span class="sr-only">Discord</span><svg class="md:m-2 w-5 md:w-8 h-5 md:h-8" viewBox="0 -28.5 256 256" preserveAspectRatio="xMidYMid"><g><path d="M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z" fill="currentColor" fill-rule="nonzero"></path></g></svg></a></div></div><div class="pt-14" data-node-hydration="10"><div class="w-full pt-12 backdrop-blur-lg bg-white/75" style="min-height:100vh;" data-node-hydration="11"><div class="max-w-screen-2xl flex flex-row justify-between mx-auto"><section class="body-font overflow-hidden mx-auto container pt-12 pb-12 w-2/3" data-node-hydration="12"><div class="-my-8"><div class="w-full mb-20 flex-wrap list-none rounded-md"><article class="markdown-body pt-1"><h1 id="kalosm-v020-tasks-evaluation-prompt-auto-tuning-regex-validation-surreal-database-integration-rag-improvements-performance-improvements-and-more" data-node-hydration="13"><a class="header" href="#kalosm-v020-tasks-evaluation-prompt-auto-tuning-regex-validation-surreal-database-integration-rag-improvements-performance-improvements-and-more">Kalosm v0.2.0 Tasks, Evaluation, Prompt Auto-Tuning, Regex Validation, Surreal Database Integration, RAG improvements, Performance Improvements, and More!</a></h1><p data-node-hydration="14">We&#x27;re excited to announce the release of Kalosm v0.2.0! This release includes a number of new features, improvements, and bug fixes including:</p><ul data-node-hydration="15"><li>Tasks and Agents</li><li>Task Evaluation</li><li>Prompt Auto-Tuning</li><li>Regex Validation</li><li>Surreal Database Integration</li><li>RAG improvements</li><li>Performance Improvements</li><li>New Models</li></ul><h2 id="tasks-and-agents" data-node-hydration="16"><a class="header" href="#tasks-and-agents">Tasks and Agents!</a></h2><p data-node-hydration="17">Kalosm now includes utilities for running, evaluating, and improving tasks and agents.</p><p data-node-hydration="18">Let&#x27;s build a simple task and agent to demonstrate the new functionality.</p><div style="position: relative;" data-node-hydration="19"><div><pre style="background-color:#2b303b;">
<span style="color:#b48ead;">use </span><span style="color:#c0c5ce;">kalosm::language::*;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">#[</span><span style="color:#bf616a;">tokio</span><span style="color:#c0c5ce;">::</span><span style="color:#bf616a;">main</span><span style="color:#c0c5ce;">]
</span><span style="color:#c0c5ce;">async </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span style="color:#c0c5ce;">() {
</span><span style="color:#c0c5ce;">	</span><span style="color:#65737e;">// You can use tasks with llama, mistral or phi models.
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> llm = Phi::new_chat();
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#65737e;">// Now we can create a task. We will create a simple assistant that identifies keywords in a sentence.
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> task = Task::builder(&amp;llm, &quot;</span><span style="color:#a3be8c;">You are an assistant who identifies keywords in a sentence. When identifying keywords, you will output the keywords in a comma-separated list.</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">		</span><span style="color:#65737e;">// You can optionally add constraints to the task.
</span><span style="color:#c0c5ce;">        </span><span style="color:#65737e;">// accept 2-5 keywords of 2-15 characters each
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">with_constraints</span><span style="color:#c0c5ce;">(RegexParser::new(</span><span style="color:#b48ead;">r</span><span style="color:#c0c5ce;">#</span><span style="color:#a3be8c;">&quot;The keywords are:([ a-z]{2,15},){2,5}</span><span style="color:#c0c5ce;">&quot;#).</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">())
</span><span style="color:#c0c5ce;">		</span><span style="color:#65737e;">/// You can also add examples to the task to help the agent learn how to solve math problems.
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">with_example</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">What is the weather like in New York?</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">The keywords are: weather, new york, </span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">with_example</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">What is the capital of France?</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">The keywords are: capital, france, </span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">build</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#65737e;">// The first time we use the task, it will load the model and prompt which will take a bit longer.
</span><span style="color:#c0c5ce;">    task.</span><span style="color:#96b5b4;">run</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">What is the temperature in Chicago?</span><span style="color:#c0c5ce;">&quot;, &amp;llm)
</span><span style="color:#c0c5ce;">        .await
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">()
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">to_std_out</span><span style="color:#c0c5ce;">()
</span><span style="color:#c0c5ce;">        .await
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">}
</span></pre>
</div><button style="position: absolute; top: 0; right: 0; background: rgba(0, 0, 0, 0.75); color: white; border: 1px solid white; padding: 0.25em;" onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)">Copy</button></div><p data-node-hydration="20">Or you can use more complex constraints to </p><div style="position: relative;" data-node-hydration="21"><div><pre style="background-color:#2b303b;">
<span style="color:#65737e;">// First, we need to create a Llama instance. We will use the default chat model (open chat) for this example. Tasks work with chat and text generation models.
</span><span style="color:#b48ead;">let mut</span><span style="color:#c0c5ce;"> llm = Llama::new_chat();
</span><span style="color:#c0c5ce;">
</span><span style="color:#65737e;">// Next (optionally), we can define constraints for the task. In this example, we will use a regex to validate the output of the task.
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> constraints =
</span><span style="color:#c0c5ce;">	RegexParser::new(</span><span style="color:#b48ead;">r</span><span style="color:#a3be8c;">&quot;(Step \d: \d+ [+\-*/] \d+ = \d+\n){1,3}Output: \d+</span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#65737e;">// Now we can create a task. We will create a simple math problem solving task.
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> task = Task::builder(&amp;llm, &quot;</span><span style="color:#a3be8c;">You are an assistant who solves math problems. When solving problems, you will always solve problems step by step with one step per line. Once you have solved the problem, you will output the result in the format &#39;Output: &lt;result&gt;&#39;.</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">	.</span><span style="color:#96b5b4;">with_constraints</span><span style="color:#c0c5ce;">(constraints)
</span><span style="color:#c0c5ce;">	</span><span style="color:#65737e;">// You can also add examples to the task to help the agent learn how to solve math problems.
</span><span style="color:#c0c5ce;">	.</span><span style="color:#96b5b4;">with_example</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">What is 1 + 2?</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">Step 1: 1 + 2 = 3</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">Output: 3</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">	.</span><span style="color:#96b5b4;">with_example</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">What is 3 + 4?</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">Step 1: 3 + 4 = 7</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">Output: 7</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">	.</span><span style="color:#96b5b4;">with_example</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">What is (4 + 8) / 3?</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">Step 1: 4 + 8 = 12</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">Step 2: 12 / 3 = 4</span><span style="color:#96b5b4;">\n</span><span style="color:#a3be8c;">Output: 4</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">	.</span><span style="color:#96b5b4;">build</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#65737e;">// The first time we use the task, it will load the model and prompt which will take a bit longer.
</span><span style="color:#c0c5ce;">task.</span><span style="color:#96b5b4;">run</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">What is 2 + 2?</span><span style="color:#c0c5ce;">&quot;, &amp;llm)
</span><span style="color:#c0c5ce;">	.await
</span><span style="color:#c0c5ce;">	.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">()
</span><span style="color:#c0c5ce;">	.</span><span style="color:#96b5b4;">to_std_out</span><span style="color:#c0c5ce;">()
</span><span style="color:#c0c5ce;">	.await
</span><span style="color:#c0c5ce;">	.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span></pre>
</div><button style="position: absolute; top: 0; right: 0; background: rgba(0, 0, 0, 0.75); color: white; border: 1px solid white; padding: 0.25em;" onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)">Copy</button></div><p data-node-hydration="22">Tasks can efficiently reuse the session between runs, which can significantly speed up the process:</p><div style="position: relative;" data-node-hydration="23"><div><pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">question </span><span style="color:#d08770;">1
</span><span style="color:#c0c5ce;">Step </span><span style="color:#d08770;">1</span><span style="color:#c0c5ce;">: </span><span style="color:#d08770;">2 </span><span style="color:#c0c5ce;">+ </span><span style="color:#d08770;">2 </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">4
</span><span style="color:#c0c5ce;">Output: </span><span style="color:#d08770;">4.
</span><span style="color:#c0c5ce;">first question took: </span><span style="color:#d08770;">18.371939709</span><span style="color:#c0c5ce;">s
</span><span style="color:#c0c5ce;">question </span><span style="color:#d08770;">2
</span><span style="color:#c0c5ce;">Step </span><span style="color:#d08770;">1</span><span style="color:#c0c5ce;">: </span><span style="color:#d08770;">4 </span><span style="color:#c0c5ce;">+ </span><span style="color:#d08770;">4 </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">8
</span><span style="color:#c0c5ce;">Output: </span><span style="color:#d08770;">8
</span><span style="color:#c0c5ce;">second question took: </span><span style="color:#d08770;">5.723529959</span><span style="color:#c0c5ce;">s
</span><span style="color:#c0c5ce;">question </span><span style="color:#d08770;">3
</span><span style="color:#c0c5ce;">Step </span><span style="color:#d08770;">1</span><span style="color:#c0c5ce;">: </span><span style="color:#d08770;">7 </span><span style="color:#c0c5ce;">+ </span><span style="color:#d08770;">5 </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">12
</span><span style="color:#c0c5ce;">Step </span><span style="color:#d08770;">2</span><span style="color:#c0c5ce;">: </span><span style="color:#d08770;">12 </span><span style="color:#c0c5ce;">/ </span><span style="color:#d08770;">2 </span><span style="color:#c0c5ce;">= </span><span style="color:#d08770;">6
</span><span style="color:#c0c5ce;">Output: </span><span style="color:#d08770;">6
</span><span style="color:#c0c5ce;">third question took: </span><span style="color:#d08770;">9.303650625</span><span style="color:#c0c5ce;">s
</span></pre>
</div><button style="position: absolute; top: 0; right: 0; background: rgba(0, 0, 0, 0.75); color: white; border: 1px solid white; padding: 0.25em;" onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)">Copy</button></div><p data-node-hydration="24">The third question required a more complex calculation and took more tokens to solve, but the time to solve the question was still significantly faster than the first question. The session from the first question was reused for the second and third questions which made the second and third questions run faster.</p><ul data-node-hydration="25"><li><strong>Evaluation Abstraction:</strong> Introducing an evaluation abstraction, providing enhanced functionality. (<a href="https://github.com/floneum/floneum/pull/113">#113</a>)</li></ul><div style="position: relative;" data-node-hydration="26"><div><pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">+-----------------+-------+
</span><span style="color:#c0c5ce;">| Statistic       | Value |
</span><span style="color:#c0c5ce;">+=========================+
</span><span style="color:#c0c5ce;">| Mean            | </span><span style="color:#d08770;">0.75  </span><span style="color:#c0c5ce;">|
</span><span style="color:#c0c5ce;">|-----------------+-------|
</span><span style="color:#c0c5ce;">| Median          | </span><span style="color:#d08770;">0.77  </span><span style="color:#c0c5ce;">|
</span><span style="color:#c0c5ce;">|-----------------+-------|
</span><span style="color:#c0c5ce;">| Min             | </span><span style="color:#d08770;">0.49  </span><span style="color:#c0c5ce;">|
</span><span style="color:#c0c5ce;">|-----------------+-------|
</span><span style="color:#c0c5ce;">| Max             | </span><span style="color:#d08770;">0.94  </span><span style="color:#c0c5ce;">|
</span><span style="color:#c0c5ce;">|-----------------+-------|
</span><span style="color:#c0c5ce;">| 25th Percentile | </span><span style="color:#d08770;">0.67  </span><span style="color:#c0c5ce;">|
</span><span style="color:#c0c5ce;">|-----------------+-------|
</span><span style="color:#c0c5ce;">| 75th Percentile | </span><span style="color:#d08770;">0.81  </span><span style="color:#c0c5ce;">|
</span><span style="color:#c0c5ce;">+-----------------+-------+
</span><span style="color:#c0c5ce;">+------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------+--------------------+
</span><span style="color:#c0c5ce;">| Expected Output                                                                          | Actual Output                                                                             | Score              |
</span><span style="color:#c0c5ce;">+===========================================================================================================================================================================================================+
</span><span style="color:#c0c5ce;">| What are Floneum plugins?                                                                | What is designed to support an expanding ecosystem of plugins?                            | </span><span style="color:#d08770;">0.49 </span><span style="color:#c0c5ce;">(low outlier) |
</span><span style="color:#c0c5ce;">|------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------+--------------------|
</span><span style="color:#c0c5ce;">| What is supervised learning in machine learning?                                         | What is required </span><span style="color:#b48ead;">for</span><span style="color:#c0c5ce;"> machine learning models in order to make accurate predictions?       | </span><span style="color:#d08770;">0.50 </span><span style="color:#c0c5ce;">(low outlier) |
</span><span style="color:#c0c5ce;">|------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------+--------------------|
</span><span style="color:#c0c5ce;">| What distinguishes open-source software from proprietary software?                       | What </span><span style="color:#b48ead;">type </span><span style="color:#c0c5ce;">of access does open source software provide </span><span style="color:#b48ead;">for</span><span style="color:#c0c5ce;"> its users?                      | </span><span style="color:#d08770;">0.64               </span><span style="color:#c0c5ce;">|
</span><span style="color:#c0c5ce;">|------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------+--------------------|
</span><span style="color:#c0c5ce;">| How does blockchain contribute to the security of cryptocurrencies?                      | What is the advantage of cryptocurrency over traditional currencies in terms of security? | </span><span style="color:#d08770;">0.65               </span><span style="color:#c0c5ce;">|
</span><span style="color:#c0c5ce;">|------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------+--------------------|
</span><span style="color:#c0c5ce;">| What are the tradeoffs of using chat </span><span style="color:#d08770;">GPT</span><span style="color:#c0c5ce;">?                                                | What is an example of how using ChatGPT may </span><span style="background-color:#bf616a;color:#2b303b;">become</span><span style="color:#c0c5ce;"> challenging in certain situations?     | </span><span style="color:#d08770;">0.65               </span><span style="color:#c0c5ce;">|
</span><span style="color:#c0c5ce;">|------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------+--------------------|
</span><span style="color:#c0c5ce;">| What is the relationship between DevOps, continuous integration and continuous delivery? | What is the main goal of DevOps?                                                          | </span><span style="color:#d08770;">0.67               </span><span style="color:#c0c5ce;">|
</span><span style="color:#c0c5ce;">|------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------+--------------------|
</span><span style="color:#c0c5ce;">| ... </span><span style="color:#d08770;">18</span><span style="color:#c0c5ce;"> more                                                                              |                                                                                           | </span><span style="color:#d08770;">0.80 </span><span style="color:#c0c5ce;">(average)     |
</span><span style="color:#c0c5ce;">+------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------+--------------------+
</span><span style="color:#c0c5ce;">| Score Histogram        |
</span><span style="color:#c0c5ce;">| </span><span style="color:#d08770;">0.00 </span><span style="color:#c0c5ce;">- </span><span style="color:#d08770;">0.10</span><span style="color:#c0c5ce;">:           |
</span><span style="color:#c0c5ce;">| </span><span style="color:#d08770;">0.10 </span><span style="color:#c0c5ce;">- </span><span style="color:#d08770;">0.20</span><span style="color:#c0c5ce;">:           |
</span><span style="color:#c0c5ce;">| </span><span style="color:#d08770;">0.20 </span><span style="color:#c0c5ce;">- </span><span style="color:#d08770;">0.30</span><span style="color:#c0c5ce;">:           |
</span><span style="color:#c0c5ce;">| </span><span style="color:#d08770;">0.30 </span><span style="color:#c0c5ce;">- </span><span style="color:#d08770;">0.40</span><span style="color:#c0c5ce;">:           |
</span><span style="color:#c0c5ce;">| </span><span style="color:#d08770;">0.40 </span><span style="color:#c0c5ce;">- </span><span style="color:#d08770;">0.50</span><span style="color:#c0c5ce;">: *         |
</span><span style="color:#c0c5ce;">| </span><span style="color:#d08770;">0.50 </span><span style="color:#c0c5ce;">- </span><span style="color:#d08770;">0.60</span><span style="color:#c0c5ce;">: *         |
</span><span style="color:#c0c5ce;">| </span><span style="color:#d08770;">0.60 </span><span style="color:#c0c5ce;">- </span><span style="color:#d08770;">0.70</span><span style="color:#c0c5ce;">: ******    |
</span><span style="color:#c0c5ce;">| </span><span style="color:#d08770;">0.70 </span><span style="color:#c0c5ce;">- </span><span style="color:#d08770;">0.80</span><span style="color:#c0c5ce;">: ********* |
</span><span style="color:#c0c5ce;">| </span><span style="color:#d08770;">0.80 </span><span style="color:#c0c5ce;">- </span><span style="color:#d08770;">0.90</span><span style="color:#c0c5ce;">: *****     |
</span><span style="color:#c0c5ce;">| </span><span style="color:#d08770;">0.90 </span><span style="color:#c0c5ce;">- </span><span style="color:#d08770;">1.00</span><span style="color:#c0c5ce;">: **        |
</span></pre>
</div><button style="position: absolute; top: 0; right: 0; background: rgba(0, 0, 0, 0.75); color: white; border: 1px solid white; padding: 0.25em;" onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)">Copy</button></div><ul data-node-hydration="27"><li><strong>Prompt Auto-Tuning:</strong> Prompts can now be automatically tuned for better performance. (<a href="https://github.com/floneum/floneum/pull/132">#132</a>)</li></ul><p data-node-hydration="28">Lets take a look at the new prompt auto-tuning feature with an example. As part of the <a href="#Improved-Chunking-Strategies">RAG improvements</a>, kalosm includes a task that generates hypothetical questions about a text for an embedding model that can be used to find similar documents based on the meaning of the text for the  section. We can tune that task to find the best examples for the task with a PromptAnnealer:</p><div style="position: relative;" data-node-hydration="29"><div><pre style="background-color:#2b303b;">
<span style="color:#b48ead;">const </span><span style="color:#d08770;">EXAMPLES</span><span style="color:#c0c5ce;">: &amp;[(&amp;</span><span style="color:#b48ead;">str</span><span style="color:#c0c5ce;">, &amp;</span><span style="color:#b48ead;">str</span><span style="color:#c0c5ce;">)]= &amp;[
</span><span style="color:#c0c5ce;">    (&quot;</span><span style="color:#a3be8c;">An example input to the task</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">An example output to the task</span><span style="color:#c0c5ce;">&quot;),
</span><span style="color:#c0c5ce;">    </span><span style="color:#65737e;">// ...more examples
</span><span style="color:#c0c5ce;">];
</span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> llm = Phi::v2();
</span><span style="color:#b48ead;">const </span><span style="color:#d08770;">PREFIX</span><span style="color:#c0c5ce;">: &amp;</span><span style="color:#b48ead;">str </span><span style="color:#c0c5ce;">= &quot;</span><span style="color:#a3be8c;">Questions that are answered by the previous text: </span><span style="color:#c0c5ce;">&quot;;
</span><span style="color:#b48ead;">const </span><span style="color:#d08770;">QUESTION_STARTERS</span><span style="color:#c0c5ce;">: [&amp;</span><span style="color:#b48ead;">str</span><span style="color:#c0c5ce;">; </span><span style="color:#d08770;">9</span><span style="color:#c0c5ce;">] = [
</span><span style="color:#c0c5ce;">    &quot;</span><span style="color:#a3be8c;">Who</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">What</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">When</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">Where</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">Why</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">How</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">Which</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">Whom</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">Whose</span><span style="color:#c0c5ce;">&quot;,
</span><span style="color:#c0c5ce;">];
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> constraints = LiteralParser::new(</span><span style="color:#d08770;">PREFIX</span><span style="color:#c0c5ce;">).</span><span style="color:#96b5b4;">then</span><span style="color:#c0c5ce;">(
</span><span style="color:#c0c5ce;">    IndexParser::new(
</span><span style="color:#c0c5ce;">        </span><span style="color:#d08770;">QUESTION_STARTERS
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">iter</span><span style="color:#c0c5ce;">()
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">copied</span><span style="color:#c0c5ce;">()
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">map</span><span style="color:#c0c5ce;">(LiteralParser::new)
</span><span style="color:#c0c5ce;">            .collect::&lt;Vec&lt;_&gt;&gt;(),
</span><span style="color:#c0c5ce;">    )
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">then</span><span style="color:#c0c5ce;">(StopOn::new(&quot;</span><span style="color:#a3be8c;">?</span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">filter_characters</span><span style="color:#c0c5ce;">(
</span><span style="color:#c0c5ce;">        |</span><span style="color:#bf616a;">c</span><span style="color:#c0c5ce;">| matches!(c, &#39; &#39; | &#39;</span><span style="color:#a3be8c;">?</span><span style="color:#c0c5ce;">&#39; | &#39;</span><span style="color:#a3be8c;">a</span><span style="color:#c0c5ce;">&#39;..=&#39;</span><span style="color:#a3be8c;">z</span><span style="color:#c0c5ce;">&#39; | &#39;</span><span style="color:#a3be8c;">A</span><span style="color:#c0c5ce;">&#39;..=&#39;</span><span style="color:#a3be8c;">Z</span><span style="color:#c0c5ce;">&#39; | &#39;</span><span style="color:#a3be8c;">0</span><span style="color:#c0c5ce;">&#39;..=&#39;</span><span style="color:#a3be8c;">9</span><span style="color:#c0c5ce;">&#39; | &#39;</span><span style="color:#a3be8c;">,</span><span style="color:#c0c5ce;">&#39;),
</span><span style="color:#c0c5ce;">    ))
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">repeat</span><span style="color:#c0c5ce;">(</span><span style="color:#d08770;">1</span><span style="color:#c0c5ce;">..=</span><span style="color:#d08770;">5</span><span style="color:#c0c5ce;">),
</span><span style="color:#c0c5ce;">);
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> task = Task::builder(&quot;</span><span style="color:#a3be8c;">You generate hypothetical questions that may be answered by the given text. The questions restate any information necessary to understand the question</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">with_constraints</span><span style="color:#c0c5ce;">(constraints);
</span><span style="color:#b48ead;">let mut</span><span style="color:#c0c5ce;"> annealing = kalosm::PromptAnnealer::builder(&amp;llm, </span><span style="color:#d08770;">EXAMPLES</span><span style="color:#c0c5ce;">, task)
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">with_initial_temperature</span><span style="color:#c0c5ce;">(</span><span style="color:#d08770;">0.6</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">with_initial_choice_range</span><span style="color:#c0c5ce;">(</span><span style="color:#d08770;">1</span><span style="color:#c0c5ce;">..</span><span style="color:#d08770;">4</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">build</span><span style="color:#c0c5ce;">()
</span><span style="color:#c0c5ce;">    .await;
</span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> result = annealing.</span><span style="color:#96b5b4;">run</span><span style="color:#c0c5ce;">().await;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">println!(&quot;</span><span style="color:#a3be8c;">Result: </span><span style="color:#d08770;">{:?}</span><span style="color:#c0c5ce;">&quot;, result);
</span></pre>
</div><button style="position: absolute; top: 0; right: 0; background: rgba(0, 0, 0, 0.75); color: white; border: 1px solid white; padding: 0.25em;" onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)">Copy</button></div><p data-node-hydration="30">Here is the best set of examples that the prompt annealer found for the task:</p><table data-node-hydration="31"><thead><th>Input</th><th>Output</th></thead><tr><th>While traditional databases rely on a fixed schema, NoSQL databases like MongoDB offer a flexible structure, allowing you to store and retrieve data in a more dynamic way. This flexibility is particularly beneficial for applications with evolving data requirements.</th><th>&quot;How does MongoDB differ from traditional databases?</th></tr><tr><th>Blockchain technology, beyond cryptocurrencies, is being explored for applications like smart contracts. Smart contracts are self-executing contracts with the terms of the agreement directly written into code.</th><th>&quot;How is blockchain technology utilized in the concept of smart contracts?</th></tr></table><p data-node-hydration="32">Feeding those two examples into the task achieves a similarity score of 0.71 for all of the other examples compared to choosing two random examples from the task which only achieves a similarity score of  0.62 for all of the other examples.</p><h2 id="regex-validation" data-node-hydration="33"><a class="header" href="#regex-validation">Regex Validation</a></h2><p data-node-hydration="34">Some feedback we got from the initial release of kalosm, was that constraints for constrained generation was too complex. Constraints in Kalosm serve two purposes:</p><ol data-node-hydration="35"><li>Validation: Constraints can be used to validate the output of the model. The model will only output text that can be parsed by the constraints. This lets you ensure that the output of the model is in the format you expect.</li></ol><p data-node-hydration="36">For example, you may want to force the model response to always start with a prefix that guides the model:</p><div style="position: relative;" data-node-hydration="37"><div><pre style="background-color:#2b303b;">
<span style="color:#b48ead;">use </span><span style="color:#c0c5ce;">kalosm::language::*;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">#[</span><span style="color:#bf616a;">tokio</span><span style="color:#c0c5ce;">::</span><span style="color:#bf616a;">main</span><span style="color:#c0c5ce;">]
</span><span style="color:#c0c5ce;">async </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span style="color:#c0c5ce;">() {
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> llm = Llama::default();
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> prompt = &quot;</span><span style="color:#a3be8c;">Generate a list of 10 words you use to describe yourself: </span><span style="color:#c0c5ce;">&quot;;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> validator = LiteralParser::new(&quot;</span><span style="color:#a3be8c;">(Responding as a pirate) </span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">then</span><span style="color:#c0c5ce;">(OneLine);
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> stream = llm.</span><span style="color:#96b5b4;">stream_structured_text</span><span style="color:#c0c5ce;">(prompt, validator).await.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    stream.</span><span style="color:#96b5b4;">to_std_out</span><span style="color:#c0c5ce;">().await.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">}
</span></pre>
</div><button style="position: absolute; top: 0; right: 0; background: rgba(0, 0, 0, 0.75); color: white; border: 1px solid white; padding: 0.25em;" onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)">Copy</button></div><ol data-node-hydration="38"><li>Parsing: Constraints can be used to parse the output of the model. This can be extremely useful when you want to generate a specific structure from an LLM without writing separate logic for validation and parsing.</li></ol><p data-node-hydration="39">For example, you may want to generate a list of 10 numbers:</p><div style="position: relative;" data-node-hydration="40"><div><pre style="background-color:#2b303b;">
<span style="color:#b48ead;">use </span><span style="color:#c0c5ce;">kalosm::language::*;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">#[</span><span style="color:#bf616a;">tokio</span><span style="color:#c0c5ce;">::</span><span style="color:#bf616a;">main</span><span style="color:#c0c5ce;">]
</span><span style="color:#c0c5ce;">async </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span style="color:#c0c5ce;">() {
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> llm = Llama::default();
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> prompt = &quot;</span><span style="color:#a3be8c;">Prime numbers: </span><span style="color:#c0c5ce;">&quot;;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> validator = &lt;[</span><span style="color:#b48ead;">f32</span><span style="color:#c0c5ce;">; </span><span style="color:#d08770;">10</span><span style="color:#c0c5ce;">] as HasParser&gt;::new_parser();
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> words = llm.</span><span style="color:#96b5b4;">stream_structured_text</span><span style="color:#c0c5ce;">(prompt, validator).await.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> result: [</span><span style="color:#b48ead;">f32</span><span style="color:#c0c5ce;">; </span><span style="color:#d08770;">10</span><span style="color:#c0c5ce;">] = words.</span><span style="color:#96b5b4;">result</span><span style="color:#c0c5ce;">().await.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">    println!(&quot;</span><span style="color:#a3be8c;">Prime numbers: </span><span style="color:#d08770;">{:?}</span><span style="color:#c0c5ce;">&quot;, result);
</span><span style="color:#c0c5ce;">}
</span></pre>
</div><button style="position: absolute; top: 0; right: 0; background: rgba(0, 0, 0, 0.75); color: white; border: 1px solid white; padding: 0.25em;" onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)">Copy</button></div><p data-node-hydration="41">If you only need to validate the output of the model, the existing constraints can be more complex than what you need. In this release, we&#x27;ve added support for regex validation. This makes it easier to validate the output of the model without handling parsing:</p><div style="position: relative;" data-node-hydration="42"><div><pre style="background-color:#2b303b;">
<span style="color:#b48ead;">use </span><span style="color:#c0c5ce;">kalosm::language::*;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">#[</span><span style="color:#bf616a;">tokio</span><span style="color:#c0c5ce;">::</span><span style="color:#bf616a;">main</span><span style="color:#c0c5ce;">]
</span><span style="color:#c0c5ce;">async </span><span style="color:#b48ead;">fn </span><span style="color:#8fa1b3;">main</span><span style="color:#c0c5ce;">() {
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> llm = Llama::default();
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> prompt = &quot;</span><span style="color:#a3be8c;">Generate a list of 10 words you use to describe yourself: </span><span style="color:#c0c5ce;">&quot;;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> validator = RegexParser::new(</span><span style="color:#b48ead;">r</span><span style="color:#a3be8c;">&quot;\(Responding as a pirate\) ([a-z]{1,10}, ){10}</span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> stream = llm.</span><span style="color:#96b5b4;">stream_structured_text</span><span style="color:#c0c5ce;">(prompt, validator).await.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    stream.</span><span style="color:#96b5b4;">to_std_out</span><span style="color:#c0c5ce;">().await.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">}
</span></pre>
</div><button style="position: absolute; top: 0; right: 0; background: rgba(0, 0, 0, 0.75); color: white; border: 1px solid white; padding: 0.25em;" onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)">Copy</button></div><h2 id="surreal-database-integration" data-node-hydration="43"><a class="header" href="#surreal-database-integration">Surreal Database Integration</a></h2><p data-node-hydration="44">Vector databases can be very useful when combined with LLMs. They can be used to store and retrieve similar documents based on the meaning of the text, not just the words used. However, vector databases only handle a very limited number of use cases. In this release, we&#x27;ve added support for Surreal DB for more traditional database use cases. Surreal DB can be embedded into your application and used to store and retrieve data locally as well as over the network.</p><p data-node-hydration="45">Kalosm 0.2 allows you to create tables within Surreal DB that are indexed by vectors. You can then insert documents (or other embeddings) into the table and query the table for similar documents based on the meaning of the text.</p><p data-node-hydration="46">Let&#x27;s take a look at how you can use the Surreal DB integration to store and retrieve similar documents based on the meaning of the text:</p><div style="position: relative;" data-node-hydration="47"><div><pre style="background-color:#2b303b;">
<span style="color:#b48ead;">use </span><span style="color:#c0c5ce;">comfy_table::{Cell, Color, Row, Table};
</span><span style="color:#b48ead;">use </span><span style="color:#c0c5ce;">kalosm::language::*;
</span><span style="color:#b48ead;">use </span><span style="color:#c0c5ce;">kalosm::*;
</span><span style="color:#b48ead;">use </span><span style="color:#c0c5ce;">std::path::PathBuf;
</span><span style="color:#b48ead;">use </span><span style="color:#c0c5ce;">surrealdb::{engine::local::RocksDb, Surreal};
</span><span style="color:#c0c5ce;">
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> exists = std::path::Path::new(&quot;</span><span style="color:#a3be8c;">./db</span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">exists</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#65737e;">// Create or open a new database at ./db/temp.db
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> db = Surreal::new::&lt;RocksDb&gt;(&quot;</span><span style="color:#a3be8c;">./db/temp.db</span><span style="color:#c0c5ce;">&quot;).await.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#65737e;">// Select a specific namespace / database within the database
</span><span style="color:#c0c5ce;">db.</span><span style="color:#96b5b4;">use_ns</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">test</span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">use_db</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">test</span><span style="color:#c0c5ce;">&quot;).await.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#65737e;">// Create a new document table that uses arroy for fast vector search
</span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> document_table = db
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">document_table_builder</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">documents</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">    </span><span style="color:#65737e;">// Store the embedding database in the same directory as the document table
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">at</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">./db/embeddings.db</span><span style="color:#c0c5ce;">&quot;)
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">build</span><span style="color:#c0c5ce;">()
</span><span style="color:#c0c5ce;">    .</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#65737e;">// If the database doesn&#39;t exist, create it and insert some documents
</span><span style="color:#b48ead;">if </span><span style="color:#c0c5ce;">!exists {
</span><span style="color:#c0c5ce;">    std::fs::create_dir_all(&quot;</span><span style="color:#a3be8c;">documents</span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">    </span><span style="color:#65737e;">// Load some files from a directory
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> documents = DocumentFolder::try_from(PathBuf::from(&quot;</span><span style="color:#a3be8c;">./documents</span><span style="color:#c0c5ce;">&quot;)).</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#65737e;">// Convert the folder into a vector of documents
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> documents = documents.</span><span style="color:#96b5b4;">into_documents</span><span style="color:#c0c5ce;">().await.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">for</span><span style="color:#c0c5ce;"> document in documents {
</span><span style="color:#c0c5ce;">        </span><span style="color:#65737e;">// And insert the documents into the table (this will automatically chunk and embed the documents before they are inserted into the table and vector database)
</span><span style="color:#c0c5ce;">        document_table.</span><span style="color:#96b5b4;">insert</span><span style="color:#c0c5ce;">(document).await.</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">    }
</span><span style="color:#c0c5ce;">}
</span><span style="color:#c0c5ce;">
</span><span style="color:#65737e;">// Now we can query the table for similar documents based on the meaning of the text
</span><span style="color:#b48ead;">loop </span><span style="color:#c0c5ce;">{
</span><span style="color:#c0c5ce;">    </span><span style="color:#65737e;">// Get a query from the user and embed that query into a vector
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> user_question = </span><span style="color:#96b5b4;">prompt_input</span><span style="color:#c0c5ce;">(&quot;</span><span style="color:#a3be8c;">Query: </span><span style="color:#c0c5ce;">&quot;).</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> user_question_embedding = document_table
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">embedding_model_mut</span><span style="color:#c0c5ce;">()
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">embed</span><span style="color:#c0c5ce;">(&amp;user_question)
</span><span style="color:#c0c5ce;">        .await
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#65737e;">// Select the 5 most similar documents to the user&#39;s query
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> nearest_5 = document_table
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">select_nearest_embedding</span><span style="color:#c0c5ce;">(user_question_embedding, </span><span style="color:#d08770;">5</span><span style="color:#c0c5ce;">)
</span><span style="color:#c0c5ce;">        .await
</span><span style="color:#c0c5ce;">        .</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#65737e;">// Display the results in a formatted table with colors based on the distance from the query
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">let mut</span><span style="color:#c0c5ce;"> table = Table::new();
</span><span style="color:#c0c5ce;">    table.</span><span style="color:#96b5b4;">set_header</span><span style="color:#c0c5ce;">(vec![&quot;</span><span style="color:#a3be8c;">Score</span><span style="color:#c0c5ce;">&quot;, &quot;</span><span style="color:#a3be8c;">Value</span><span style="color:#c0c5ce;">&quot;]);
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    </span><span style="color:#b48ead;">for</span><span style="color:#c0c5ce;"> result in nearest_5 {
</span><span style="color:#c0c5ce;">        </span><span style="color:#b48ead;">let mut</span><span style="color:#c0c5ce;"> row = Row::new();
</span><span style="color:#c0c5ce;">        </span><span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> color = </span><span style="color:#b48ead;">if</span><span style="color:#c0c5ce;"> result.distance &lt; </span><span style="color:#d08770;">0.25 </span><span style="color:#c0c5ce;">{
</span><span style="color:#c0c5ce;">            Color::Green
</span><span style="color:#c0c5ce;">        } </span><span style="color:#b48ead;">else if</span><span style="color:#c0c5ce;"> result.distance &lt; </span><span style="color:#d08770;">0.75 </span><span style="color:#c0c5ce;">{
</span><span style="color:#c0c5ce;">            Color::Yellow
</span><span style="color:#c0c5ce;">        } </span><span style="color:#b48ead;">else </span><span style="color:#c0c5ce;">{
</span><span style="color:#c0c5ce;">            Color::Red
</span><span style="color:#c0c5ce;">        };
</span><span style="color:#c0c5ce;">        row.</span><span style="color:#96b5b4;">add_cell</span><span style="color:#c0c5ce;">(Cell::new(result.distance).</span><span style="color:#96b5b4;">fg</span><span style="color:#c0c5ce;">(color))
</span><span style="color:#c0c5ce;">            .</span><span style="color:#96b5b4;">add_cell</span><span style="color:#c0c5ce;">(Cell::new(result.record.</span><span style="color:#96b5b4;">body</span><span style="color:#c0c5ce;">()[</span><span style="color:#d08770;">0</span><span style="color:#c0c5ce;">..</span><span style="color:#d08770;">50</span><span style="color:#c0c5ce;">].</span><span style="color:#96b5b4;">to_string</span><span style="color:#c0c5ce;">() + &quot;</span><span style="color:#a3be8c;">...</span><span style="color:#c0c5ce;">&quot;));
</span><span style="color:#c0c5ce;">        table.</span><span style="color:#96b5b4;">add_row</span><span style="color:#c0c5ce;">(row);
</span><span style="color:#c0c5ce;">    }
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">    println!(&quot;</span><span style="color:#d08770;">{}</span><span style="color:#c0c5ce;">&quot;, table);
</span><span style="color:#c0c5ce;">}
</span></pre>
</div><button style="position: absolute; top: 0; right: 0; background: rgba(0, 0, 0, 0.75); color: white; border: 1px solid white; padding: 0.25em;" onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)">Copy</button></div><h2 id="rag-improvements" data-node-hydration="48"><a class="header" href="#rag-improvements">RAG improvements</a></h2><p data-node-hydration="49">RAG (Retrieval-Augmented Generation) is a powerful tool for generating text with up-to-date or proprietary information. Resource augmented generation generally follows the following steps:</p><ol data-node-hydration="50"><li>Gather context from some local files, your database, or web data. In kalosm, you can retrieve data from any source that implements <a href="https://docs.rs/kalosm/0.2.0/kalosm/language/trait.IntoDocument.html"><code>IntoDocument</code></a> or <a href="https://docs.rs/kalosm/0.2.0/kalosm/language/trait.IntoDocuments.html"><code>IntoDocuments</code></a>. You can gather your sources from <a href="https://docs.rs/kalosm/0.2.0/kalosm/language/struct.DocumentFolder.html">local documents</a>, a <a href="https://docs.rs/kalosm/0.2.0/kalosm/language/struct.SearchQuery.html">search term</a>, <a href="https://docs.rs/kalosm/0.2.0/kalosm/language/struct.Url.html">specific web page</a>, an <a href="https://docs.rs/kalosm/0.2.0/kalosm/language/struct.RssFeed.html">RSS feed</a>, or even a <a href="https://docs.rs/kalosm/0.2.0/kalosm/language/enum.Page.html#method.crawl">custom web crawler</a>.</li><li>Insert that context into a searchable database. Kalosm includes a <a href="https://docs.rs/kalosm/0.2.0/kalosm/language/struct.VectorDB.html">vector database</a> that can be used to store and retrieve similar documents.</li></ol><p data-node-hydration="51">Vector databases use an embedding model which generates a vector for a chunk of text (typically smaller than the entire document). The vector is then stored in the database. When you want to retrieve similar documents, you can embed a query and search for similar vectors in the database.</p><p data-node-hydration="52">The vectors represent the meaning of the text, so you can search for similar documents based on the meaning of the text, not just the words used.</p><ol data-node-hydration="53"><li>Use the context to generate text. You can find text similar to the question or a search generated by the LLM and then generate a response based on the context.</li></ol><p data-node-hydration="54">In this release, we&#x27;ve made several improvements to RAG! (<a href="https://github.com/floneum/floneum/pull/126">#126</a>)</p><h3 id="improved-chunking-strategies" data-node-hydration="55"><a class="header" href="#improved-chunking-strategies">Improved Chunking Strategies</a></h3><p data-node-hydration="56">When you insert a document into a vector database, it needs to be split into smaller chunks before the text is embedded. The chunks you choose can have a significant impact on the performance of the results you get from the vector database. In this release, we&#x27;ve added two new chunking strategies to the vector database:</p><ul data-node-hydration="57"><li>Hypothetical Questions</li></ul><p data-node-hydration="58">Instead of generating embeddings based on the content of the document, this chunking strategy generates embeddings based on hypothetical questions generated about the document. This can be extremely useful when building a chatbot that needs to find context that is relevant to a question.</p><p data-node-hydration="59">For example, if you have a document about the history of the United States, you can generate hypothetical questions like &quot;What is the capital of the United States?&quot; and &quot;Who was the first president of the United States?&quot; and then generate embeddings based on those questions.</p><p data-node-hydration="60">Then if you query the vector database with a question like &quot;Who was the leader of the US?&quot; you can find the document about the history of the United States.</p><blockquote data-node-hydration="61"><p>Notice that the question &quot;Who was the leader of the US?&quot; doesn&#x27;t contain many of the same words as the hypothetical questions, but it does convey a similar meaning, so the vector database can still find the relevant document.</p></blockquote><ul data-node-hydration="62"><li>Summaries</li></ul><p data-node-hydration="63">This chunking strategy generates embeddings based on the summary of the document. This can be useful when you have a large document and you want to find similar documents based on the main points of the document.</p><p data-node-hydration="64">Generating embeddings based on the summary of the document can create better embeddings that contain more information about the document than embeddings that only contain one small chunk of the document.</p><h3 id="incremental-indexing" data-node-hydration="65"><a class="header" href="#incremental-indexing">Incremental Indexing</a></h3><p data-node-hydration="66">In addition to the new chunking strategies, we&#x27;ve also added support for incremental indexing. This means you can add new documents to the vector database without having to recreate the entire database. This can be extremely useful when you have a large database or you have constantly updating context you want to provide to your LLM.</p><p data-node-hydration="67">Kalosm&#x27;s Vector database is now backed by <a href="https://github.com/meilisearch/arroy">arroy</a>, a space-efficient and incrementally indexed vector database backed by MeiliSearch!</p><h2 id="performance-improvements" data-node-hydration="68"><a class="header" href="#performance-improvements">Performance Improvements</a></h2><p data-node-hydration="69">The llama implementation has been rewritten and optimized for better performance and modularity. The new implementation is now 7-25% faster than the previous version. In future releases, we plan to add support for fine tuning models and training new heads for existing models. (<a href="https://github.com/floneum/floneum/pull/122">#122</a>)</p><p data-node-hydration="70">Language models like Llama and Phi output probabilities for each token in the vocabulary. To generate text you need to sample from the probability distribution. Sampling from the probability distribution can be slow, especially with large vocabularies. Kalosm 0.2 uses an optimization introduced in <a href="https://github.com/KerfuffleV2/llm-samplers/pull/9">llm-samplers</a> to only sample top 512 tokens. This optimization can make sampling up to 2x faster. (<a href="https://github.com/floneum/floneum/pull/123">#123</a>)</p><p data-node-hydration="71">Large sections of text that are static within a constraint in structured generation is now loaded in a batch which can significantly speed up the process.</p><p data-node-hydration="72">For example if you have the constraints:</p><div style="position: relative;" data-node-hydration="73"><div><pre style="background-color:#2b303b;">
<span style="color:#b48ead;">let</span><span style="color:#c0c5ce;"> constraints = RegexParser::new(</span><span style="color:#b48ead;">r</span><span style="color:#c0c5ce;">#</span><span style="color:#a3be8c;">&quot;(The title of the book is [a-z]{2,15}\n)*</span><span style="color:#c0c5ce;">&quot;#).</span><span style="color:#96b5b4;">unwrap</span><span style="color:#c0c5ce;">();
</span></pre>
</div><button style="position: absolute; top: 0; right: 0; background: rgba(0, 0, 0, 0.75); color: white; border: 1px solid white; padding: 0.25em;" onclick="navigator.clipboard.writeText(this.previousElementSibling.innerText)">Copy</button></div><p data-node-hydration="74">The text &quot;The title of the book is &quot; will be loaded in a batch instead of one token at a time. Batched loading has been restored in constrained generation. (<a href="https://github.com/floneum/floneum/pull/131">#131</a>)</p><h2 id="new-models" data-node-hydration="75"><a class="header" href="#new-models">New Models</a></h2><p data-node-hydration="76">Kalosm 0.2 adds support for several new models, including:</p><ul data-node-hydration="77"><li><strong>Dolphin Phi v2</strong> A tiny chat model</li><li><strong>Solar-11b Models</strong> A set of models for chat, text, and code generation</li><li><strong>Tiny Llama 1.0</strong> A tiny set of models for chat, and text text generation</li></ul><h2 id="full-changelog" data-node-hydration="78"><a class="header" href="#full-changelog">Full Changelog</a></h2><p data-node-hydration="79">For a detailed list of changes between v0.1.0 and v0.2.0, please see the <a href="https://github.com/floneum/floneum/compare/v0.2.0...v0.2.0-kalosm">full changelog</a>.</p><p data-node-hydration="80">I hope you enjoy using Kalosm v0.2.0! Your feedback is invaluable to us, so please don&#x27;t hesitate to share your thoughts and report any issues you encounter.</p><h2 id="whats-next" data-node-hydration="81"><a class="header" href="#whats-next">What&#x27;s next?</a></h2><p data-node-hydration="82">In the next release, we plan to add support for fine tuning models and training new heads for existing models. We also plan to continue improving the performance of the language models and adding support for more models.</p><p data-node-hydration="83">If any of those features sound interesting or you want to propose a new feature, consider contributing on <a href="https://github.com/floneum/floneum/tree/master/interfaces/kalosm">Github</a>.</p><p data-node-hydration="84">If you are interested in building an application with Kalosm, <a href="https://discord.gg/dQdmhuB8q5">join the Discord</a> and get involved with the community!</p><script data-node-hydration="85"></script></article></div></div></section><div class="hidden xl:sticky xl:top-[4.75rem] xl:-mr-6 xl:block xl:h-[calc(100vh-4.75rem)] xl:flex-none xl:overflow-y-auto xl:py-16 xl:pr-6" data-node-hydration="86"><nav aria-labelledby="on-this-page-title" class="w-56"><h2 id="on-this-page-title" class="font-display text-sm font-medium text-slate-900" data-node-hydration="87">On this page</h2><ol role="list" class="mt-4 space-y-3 text-sm" data-node-hydration="88"><li class="pb-2 pl-2" data-node-hydration="89"><h3><a class="font-normal text-slate-500 hover:text-slate-700" href="#kalosm-v0.2.0-tasks,-evaluation,-prompt-auto-tuning,-regex-validation,-surreal-database-integration,-rag-improvements,-performance-improvements,-and-more!" data-node-hydration="90"><!--node-id91-->Kalosm v0.2.0 Tasks, Evaluation, Prompt Auto-Tuning, Regex Validation, Surreal Database Integration, RAG improvements, Performance Improvements, and More!<!--#--></a></h3></li><li class="pb-2 pl-4" data-node-hydration="92"><h3><a class="font-normal text-slate-500 hover:text-slate-700" href="#tasks-and-agents!" data-node-hydration="93"><!--node-id94-->Tasks and Agents!<!--#--></a></h3></li><li class="pb-2 pl-4" data-node-hydration="95"><h3><a class="font-normal text-slate-500 hover:text-slate-700" href="#regex-validation" data-node-hydration="96"><!--node-id97-->Regex Validation<!--#--></a></h3></li><li class="pb-2 pl-4" data-node-hydration="98"><h3><a class="font-normal text-slate-500 hover:text-slate-700" href="#surreal-database-integration" data-node-hydration="99"><!--node-id100-->Surreal Database Integration<!--#--></a></h3></li><li class="pb-2 pl-4" data-node-hydration="101"><h3><a class="font-normal text-slate-500 hover:text-slate-700" href="#rag-improvements" data-node-hydration="102"><!--node-id103-->RAG improvements<!--#--></a></h3></li><li class="pb-2 pl-4" data-node-hydration="104"><h3><a class="font-normal text-slate-500 hover:text-slate-700" href="#performance-improvements" data-node-hydration="105"><!--node-id106-->Performance Improvements<!--#--></a></h3></li><li class="pb-2 pl-4" data-node-hydration="107"><h3><a class="font-normal text-slate-500 hover:text-slate-700" href="#new-models" data-node-hydration="108"><!--node-id109-->New Models<!--#--></a></h3></li><li class="pb-2 pl-4" data-node-hydration="110"><h3><a class="font-normal text-slate-500 hover:text-slate-700" href="#full-changelog" data-node-hydration="111"><!--node-id112-->Full Changelog<!--#--></a></h3></li><li class="pb-2 pl-4" data-node-hydration="113"><h3><a class="font-normal text-slate-500 hover:text-slate-700" href="#what's-next?" data-node-hydration="114"><!--node-id115-->What&#x27;s next?<!--#--></a></h3></li></ol></nav></div></div></div><div class="py-5 flex flex-row items-center justify-evenly"><div class="flex flex-col items-center">Discord Community<a href="https://discord.gg/dQdmhuB8q5" style="margin:10px;right:10px;" data-node-hydration="116"><span class="sr-only">Discord</span><svg class="md:m-2 w-5 md:w-8 h-5 md:h-8" viewBox="0 -28.5 256 256" preserveAspectRatio="xMidYMid"><g><path d="M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z" fill="currentColor" fill-rule="nonzero"></path></g></svg></a></div><div class="flex flex-col items-center">Source Code<a href="https://github.com/floneum/floneum" data-node-hydration="117"><span class="sr-only">Github</span><svg class="md:m-2 w-5 md:w-8 h-5 md:h-8" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" fill="currentColor" fill-rule="nonzero"></path></svg></a></div></div></div></div>
  <script>
    window.addEventListener('scroll', () => {
      let scrollTop = window.scrollY;
      let winHeight = window.document.documentElement.scrollHeight - window.document.documentElement.clientHeight;
      let new_scroll = Math.min(Math.max(scrollTop, 0) / Math.max(winHeight, 1), 1);

      document.body.style.setProperty('--scroll', new_scroll);
    }, false);
  </script>
<script type="module">
    import init from "/./assets/dioxus/floneum-site.js";
    init("/./assets/dioxus/floneum-site_bg.wasm").then(wasm => {
      if (wasm.__wbindgen_start == undefined) {
        wasm.main();
      }
    });
    </script>
    </body>

</html>